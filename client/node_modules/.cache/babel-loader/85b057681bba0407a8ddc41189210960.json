{"ast":null,"code":"import _classCallCheck from \"/Users/shadan/Desktop/Mern-stack/week5/favouritrbtn/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/shadan/Desktop/Mern-stack/week5/favouritrbtn/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/shadan/Desktop/Mern-stack/week5/favouritrbtn/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/shadan/Desktop/Mern-stack/week5/favouritrbtn/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/shadan/Desktop/Mern-stack/week5/favouritrbtn/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/shadan/Desktop/Mern-stack/week5/favouritrbtn/client/src/components/Itinerary.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { getItinerariesByCityName, getfavItineraries } from \"../actions/itinerariesAction\";\nimport Activities from \"./Activities\";\nimport axios from \"axios\";\nimport Favourites from \"./Favourites\";\n\nvar Itineraries =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Itineraries, _Component);\n\n  function Itineraries() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Itineraries);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Itineraries)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      itineraries: [],\n      selectedItinerary: \"\",\n      favBtnSelected: \"\",\n      currentUserId: \"\"\n    };\n\n    _this.favButton = function (e) {\n      _this.setState({\n        favBtnSelected: e.target.id\n      });\n\n      var fav = e.target.id;\n      console.log(fav);\n      axios.put(\"/api/users/\".concat(_this.state.currentUserId), {\n        fav: fav\n      }).then(function (res) {\n        console.log(res.data);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Itineraries, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (this.props.match.params.city) {\n        this.props.getItinerariesByCityName(this.props.match.params.city); // this.props.getfavItineraries([\n        //   \"5bf43d011393550725e4e17b\",\n        //   \"5bf6d8ca8b676a245906498f\"\n        // ]);\n      }\n\n      console.log(\"wow\");\n      axios.get(\"/api/users/currentUser\", {\n        withCredentials: true,\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        }\n      }).then(function (res) {\n        console.log(res);\n        console.log(res.data[0]._id);\n\n        _this2.setState({\n          currentUserId: res.data[0]._id\n        });\n      });\n      console.log(\"Nooooo\");\n    }\n  }, {\n    key: \"selectItinerary\",\n    value: function selectItinerary(itinerary) {\n      this.setState({\n        selectedItinerary: itinerary\n      });\n      console.log(itinerary);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      //console.log(\"props: \", this.props);\n      //console.log(\"state: \", this.state.itineraries);\n      console.log(this.state.favBtnSelected); // console.log(this.props.match.params);\n\n      if (this.props.itineraries.error) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, this.props.itineraries.error);\n      } else {\n        return React.createElement(\"div\", {\n          className: \"Itinerary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(Favourites, {\n          current: this.state.currentUserId,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }), this.props.itineraries.map(function (itinerary, index) {\n          return React.createElement(\"div\", {\n            key: index,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            id: itinerary._id,\n            onClick: _this3.favButton,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          }, \"my favourite\"), React.createElement(\"div\", {\n            className: \"itineraryTitle\",\n            key: itinerary.title,\n            onClick: function onClick() {\n              return _this3.selectItinerary(itinerary.title);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, itinerary.title, React.createElement(Activities, {\n            itinerary: itinerary.title,\n            isVisible: _this3.state.selectedItinerary === itinerary.title,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          })), React.createElement(\"div\", {\n            className: \"itineraryProfilePic\",\n            key: itinerary.profilePic,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 83\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"profilePic\",\n            src: itinerary.profilePic,\n            alt: \"profile Pic\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          })), React.createElement(\"p\", {\n            className: \"itineraryRating\",\n            key: itinerary.rating,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 90\n            },\n            __self: this\n          }, \"Likes: \", itinerary.rating), React.createElement(\"p\", {\n            className: \"itineraryDuration\",\n            key: itinerary.duration,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            },\n            __self: this\n          }, itinerary.duration, \" hours\"), React.createElement(\"p\", {\n            className: \"itineraryPrice\",\n            key: itinerary.price,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 96\n            },\n            __self: this\n          }, \"$\", itinerary.price), React.createElement(\"p\", {\n            className: \"itineraryHashtag\",\n            key: itinerary.hashtag,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99\n            },\n            __self: this\n          }, itinerary.hashtag));\n        }));\n      }\n    }\n  }]);\n\n  return Itineraries;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    itineraries: state.itineraries\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getItinerariesByCityName: getItinerariesByCityName,\n  getfavItineraries: getfavItineraries\n})(Itineraries);","map":{"version":3,"sources":["/Users/shadan/Desktop/Mern-stack/week5/favouritrbtn/client/src/components/Itinerary.js"],"names":["React","Component","connect","getItinerariesByCityName","getfavItineraries","Activities","axios","Favourites","Itineraries","state","itineraries","selectedItinerary","favBtnSelected","currentUserId","favButton","e","setState","target","id","fav","console","log","put","then","res","data","props","match","params","city","get","withCredentials","headers","Authorization","localStorage","getItem","_id","itinerary","error","map","index","title","selectItinerary","profilePic","rating","duration","price","hashtag","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  getItinerariesByCityName,\n  getfavItineraries\n} from \"../actions/itinerariesAction\";\nimport Activities from \"./Activities\";\nimport axios from \"axios\";\nimport Favourites from \"./Favourites\";\n\nclass Itineraries extends Component {\n  state = {\n    itineraries: [],\n    selectedItinerary: \"\",\n    favBtnSelected: \"\",\n    currentUserId: \"\"\n  };\n\n  componentDidMount() {\n    if (this.props.match.params.city) {\n      this.props.getItinerariesByCityName(this.props.match.params.city);\n      // this.props.getfavItineraries([\n      //   \"5bf43d011393550725e4e17b\",\n      //   \"5bf6d8ca8b676a245906498f\"\n      // ]);\n    }\n    console.log(\"wow\");\n    axios\n      .get(`/api/users/currentUser`, {\n        withCredentials: true,\n        headers: { Authorization: localStorage.getItem(\"token\") }\n      })\n      .then(res => {\n        console.log(res);\n        console.log(res.data[0]._id);\n        this.setState({ currentUserId: res.data[0]._id });\n      });\n    console.log(\"Nooooo\");\n  }\n\n  selectItinerary(itinerary) {\n    this.setState({ selectedItinerary: itinerary });\n    console.log(itinerary);\n  }\n\n  favButton = e => {\n    this.setState({ favBtnSelected: e.target.id });\n    const fav = e.target.id;\n    console.log(fav);\n    axios.put(`/api/users/${this.state.currentUserId}`, { fav }).then(res => {\n      console.log(res.data);\n    });\n  };\n\n  render() {\n    //console.log(\"props: \", this.props);\n    //console.log(\"state: \", this.state.itineraries);\n    console.log(this.state.favBtnSelected);\n    // console.log(this.props.match.params);\n    if (this.props.itineraries.error) {\n      return <div>{this.props.itineraries.error}</div>;\n    } else {\n      return (\n        <div className=\"Itinerary\">\n          <Favourites current={this.state.currentUserId} />\n          {this.props.itineraries.map((itinerary, index) => (\n            <div key={index}>\n              <button id={itinerary._id} onClick={this.favButton}>\n                my favourite\n              </button>\n              <div\n                className=\"itineraryTitle\"\n                key={itinerary.title}\n                onClick={() => this.selectItinerary(itinerary.title)}\n              >\n                {itinerary.title}\n\n                <Activities\n                  itinerary={itinerary.title}\n                  isVisible={this.state.selectedItinerary === itinerary.title}\n                />\n              </div>\n              <div className=\"itineraryProfilePic\" key={itinerary.profilePic}>\n                <img\n                  className=\"profilePic\"\n                  src={itinerary.profilePic}\n                  alt=\"profile Pic\"\n                />\n              </div>\n              <p className=\"itineraryRating\" key={itinerary.rating}>\n                Likes: {itinerary.rating}\n              </p>\n              <p className=\"itineraryDuration\" key={itinerary.duration}>\n                {itinerary.duration} hours\n              </p>\n              <p className=\"itineraryPrice\" key={itinerary.price}>\n                ${itinerary.price}\n              </p>\n              <p className=\"itineraryHashtag\" key={itinerary.hashtag}>\n                {itinerary.hashtag}\n              </p>\n            </div>\n          ))}\n        </div>\n      );\n    }\n  }\n}\nconst mapStateToProps = state => {\n  return {\n    itineraries: state.itineraries\n  };\n};\nexport default connect(\n  mapStateToProps,\n  { getItinerariesByCityName, getfavItineraries }\n)(Itineraries);\n"]},"metadata":{},"sourceType":"module"}